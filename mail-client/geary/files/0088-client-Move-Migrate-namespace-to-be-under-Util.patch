From d7e05ab20e780042e6d7ee90f323a65c97b857f4 Mon Sep 17 00:00:00 2001
From: Michael Gratton <mike@vee.net>
Date: Tue, 13 Oct 2020 19:23:58 +1100
Subject: [PATCH 088/124] client: Move Migrate namespace to be under Util

---
 src/client/application/application-configuration.vala | 2 +-
 src/client/application/application-controller.vala    | 6 ++++--
 src/client/util/util-migrate.vala                     | 2 +-
 3 files changed, 6 insertions(+), 4 deletions(-)

diff --git a/src/client/application/application-configuration.vala b/src/client/application/application-configuration.vala
index 48542df6..eaaed36f 100644
--- a/src/client/application/application-configuration.vala
+++ b/src/client/application/application-configuration.vala
@@ -146,7 +146,7 @@ public class Application.Configuration : Geary.BaseObject {
         settings = new Settings(schema_id);
         gnome_interface = new Settings("org.gnome.desktop.interface");
 
-        Migrate.old_app_config(settings);
+        Util.Migrate.old_app_config(settings);
 
         this.bind(SINGLE_KEY_SHORTCUTS, this, SINGLE_KEY_SHORTCUTS);
     }
diff --git a/src/client/application/application-controller.vala b/src/client/application/application-controller.vala
index 55864cda..9fd5966f 100644
--- a/src/client/application/application-controller.vala
+++ b/src/client/application/application-controller.vala
@@ -171,8 +171,10 @@ internal class Application.Controller :
         );
 
         // Migrate configuration if necessary.
-        Migrate.xdg_config_dir(this.application.get_user_data_directory(),
-                               this.application.get_user_config_directory());
+        Util.Migrate.xdg_config_dir(
+            this.application.get_user_data_directory(),
+            this.application.get_user_config_directory()
+        );
 
         // Hook up cert, accounts and credentials machinery
 
diff --git a/src/client/util/util-migrate.vala b/src/client/util/util-migrate.vala
index f4a905ed..9cebcfc6 100644
--- a/src/client/util/util-migrate.vala
+++ b/src/client/util/util-migrate.vala
@@ -4,7 +4,7 @@
  * (version 2.1 or later).  See the COPYING file in this distribution.
  */
 
-namespace Migrate {
+namespace Util.Migrate {
     private const string GROUP = "AccountInformation";
     private const string PRIMARY_EMAIL_KEY = "primary_email";
     private const string SETTINGS_FILENAME = Accounts.Manager.SETTINGS_FILENAME;
-- 
2.29.2

